{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/utils.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/astParser.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/vnode.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["const originArrMethods = Array.prototype,\n      newArrMethods = Object.create(originArrMethods);\n\nconst ARR_METHODS = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n];\n\nARR_METHODS.map((method) => {\n  newArrMethods[method] = function (...args) {\n    const result = originArrMethods[methods].apply(this, args),\n          ob = this.__ob__;\n\n    let newArr;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        newArr = args;\n        break;\n      case 'splice':\n        newArr = args.slice(2);\n        break;\n      default:\n        break;\n    }\n\n    if (newArr) ob.observeArr(newArr);\n\n    return result;\n  }\n})\n\nexport {\n  newArrMethods\n}","function proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      if (vm[target][key] === newValue) return;\n      vm[target][key] = newValue;\n    }\n  })\n}\n\nfunction isObject (value) {\n  return typeof value === 'object' && value !== null;\n}\n\nfunction isArray (value) {\n  return Array.isArray(value);\n}\n\nfunction setConstantProperty (data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  });\n}\n\nexport {\n  proxy,\n  isObject,\n  isArray,\n  setConstantProperty\n}","import { newArrMethods } from \"./array\";\nimport { isObject, isArray, setConstantProperty } from '../utils';\n\nclass Observer {\n  \n  constructor(data) {\n    setConstantProperty(data, '__ob__', this);\n\n    if (isArray(data)) {\n      data.__proto__ = newArrMethods;\n      this.observeArr(data);\n    } else {\n      this.walk(data);\n    }\n  }\n\n  walk (data) {\n    const keys = Object.keys(data);\n\n    keys.map((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n\n  observeArr (data) {\n    data.map((item) => {\n      observe(item);\n    });\n  }\n}\n\nfunction defineReactive (data, key, value) {\n  observe(value);\n  Object.defineProperty(data, key, {\n    get () {\n      console.log('响应式获取：' + value);\n      return value;\n    },\n    set (newValue) {\n      if (value === newValue) return;\n      console.log('响应式设置：' + key + ' = ' + newValue);\n      observe(newValue);\n      value = newValue;\n    }\n  }) \n}\n\nfunction observe (data) {\n  if (!isObject(data) || data.__ob__) { \n    return data;\n  }\n\n  new Observer(data);\n}\n\nexport {\n  observe\n}","import { observe } from \"./observer\";\nimport { proxy } from './utils';\n\nfunction initState (vm) {\n  const options = vm.$options;\n\n  if (options.data) {\n    initData(vm);\n  }\n\n}\n\n\n\nfunction initData (vm) {\n  let data = vm.$options.data;\n\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data;\n  \n  for (let key in data) {\n    proxy(vm, '_data', key);\n  }\n  \n  observe(data);\n}\n\n\nexport {\n  initState\n}","// id=\"app\" id='app' id=app\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n//标签名  <my-header></my-header>\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\n// <my:header></my:header>\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\n// <div\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\n// > />\nconst startTagClose = /^\\s*(\\/?)>/;\n// </div>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\n\n/*\n<div id=\"app\" style=\"color: red;font-size: 20px;\">\n    你好，{{ name }}\n    <span class=\"text\" style=\"color: green\">{{age}}</span>\n  </div>\n*/\n\nfunction parseHtmlToAst (html) {\n\n  let text,\n      root,\n      currentParent,\n      stack = [];\n\n  while (html) {\n    let textEnd = html.indexOf('<');\n\n    if (textEnd === 0) {\n      const startTagMatch = parseStartTag();\n      \n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n\n      const endTagMatch = html.match(endTag);\n\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n    }\n\n    if (text) {\n      advance(text.length);\n      chars(text);\n    }\n  }\n\n\n  function parseStartTag () {\n    const start = html.match(startTagOpen);\n\n    let end,\n        attr;\n    \n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length);\n\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5]\n        });\n        advance(attr[0].length);\n      }\n\n      if (end) {\n        advance(end[0].length);\n        return match;\n      }\n    }\n  }\n\n  function advance (n) {\n    html = html.substring(n);\n  }\n  \n  // currentParent div\n  //stack [div]\n  function start(tagName, attrs) {\n    const element = createASTElement(tagName, attrs);\n    \n    if (!root) {\n      root = element;\n    }\n\n    currentParent = element;\n    stack.push(element);\n  }\n\n  function end(tagName) {\n          // span\n    const element = stack.pop();\n    // div\n    currentParent = stack[stack.length - 1];\n    if (currentParent) {\n      // span => parent => div\n      element.parent = currentParent;\n      // div => children => push => span\n      currentParent.children.push(element);\n    }\n  }\n\n  function chars(text) {\n    text = text.trim();\n\n    if (text.length > 0) {\n      currentParent.children.push({\n        type: 3,\n        text\n      })\n    }\n  }\n\n  function createASTElement(tagName, attrs) {\n    return {\n      tag: tagName,\n      type: 1,\n      children: [],\n      attrs,\n      parent\n    }\n  }\n  return root;\n}\n\n\n\nexport {\n  parseHtmlToAst\n}","/*\n<div id=\"app\" style=\"color: red;font-size: 20px;\">\n  你好，{{ name }}\n  <span class=\"text\" style=\"color: green\">{{age}}</span>\n</div>\n\n_c() => createElement()\n_v() => createTextNode()\n_s() => {{name}} => _s(name)\n*/\n\n// function render() {\n//   return `\n//     _c(\n//       \"div\", \n//       {\n//         id: \"app\", \n//         style: { \n//           \"color\": \"red\", \n//           \"font-size\": \"20px\" \n//         }\n//       },\n//       _v(\"你好，\"+_s(name)),\n//       _c(\n//         \"span\",\n//         {\n//           \"class\": \"text\",\n//           \"style\": {\n//             \"color\": \"green\"\n//           }\n//         },\n//         _v(_s(age))\n//       )  \n//     )\n//   `;\n// }\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nfunction formatProps (attrs) {\n  let attrStr = '';\n\n  for (var i = 0; i < attrs.length; i ++) {\n    let attr = attrs[i];\n\n    if (attr.name === 'style') {\n      let styleAttrs = {};\n\n      attr.value.split(';').map((styleAttr) => {\n        let [key, value] = styleAttr.split(':');\n        styleAttrs[key] = value;\n      });\n      attr.value = styleAttrs;\n    }\n\n    attrStr += `${attr.name}:${JSON.stringify(attr.value)},`\n  }\n\n  return `{${attrStr.slice(0, -1)}}`;\n}\n\nfunction generateChild (node) {\n  if (node.type === 1) {\n    return generate(node);\n  } else if (node.type === 3) {\n    let text = node.text;\n\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`;\n    }\n\n    let match,\n        index,\n        lastIndex = defaultTagRE.lastIndex = 0,\n        textArr = [];\n\n    while (match = defaultTagRE.exec(text)) {\n      index = match.index;\n      if (index > lastIndex) {\n        textArr.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      textArr.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n    }\n\n    if (lastIndex < text.length) {\n      textArr.push(JSON.stringify(text.slice(lastIndex)));\n    }\n\n    return `_v(${textArr.join('+')})`;\n  }\n}\n\nfunction geChildren (el) {\n  const children = el.children;\n\n  if (children) {\n    return children.map(c => generateChild(c)).join(',');\n  }\n}\n\nfunction generate (el) {\n  let children = geChildren(el);\n\n  let code = `_c('${ el.tag }', ${\n      el.attrs.length > 0 \n      ?\n      `${ formatProps(el.attrs) }`\n      :\n      'undefined'\n    }${\n      children ? `,${children}` : ''\n    })`;\n\n  return code;\n}\n\nexport {\n  generate\n}","import { parseHtmlToAst } from './astParser';\nimport { generate } from './generate';\n\nfunction compileToRenderFunction (html) {\n  const ast = parseHtmlToAst(html),\n        code = generate(ast),\n        render = new Function(`\n          with(this){ return ${code} }\n        `);\n  return render;\n}\n\nexport {\n  compileToRenderFunction\n}","function patch (oldNode, vNode) {\n  let el = createElement(vNode),\n      parentElement = oldNode.parentNode;\n  \n  parentElement.insertBefore(el, oldNode.nextSibling);\n  parentElement.removeChild(oldNode);\n}\n\nfunction createElement (vnode) {\n  const { tag, props, children, text } = vnode;\n\n  if (typeof tag === 'string') {\n    vnode.el = document.createElement(tag);\n    updateProps(vnode);\n    children.map((child) => {\n      vnode.el.appendChild(createElement(child));\n    })\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n\n  return vnode.el;\n}\n\nfunction updateProps (vnode) {\n  const el = vnode.el,\n        newProps = vnode.props || {};\n  \n  for (let key in newProps) {\n    if (key === 'style') {\n      for (let sKey in newProps.style) {\n        el.style[sKey] = newProps.style[sKey];\n      }\n    } else if (key === 'class') {\n      el.className = el.class;\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}\n\nexport {\n  patch\n}","import { patch } from './vdom/patch';\n\nfunction mountComponent (vm) {\n              // vnode\n  vm._update(vm._render());\n}\n\nfunction lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    patch(vm.$el, vnode);\n  }\n}\n\nexport {\n  lifecycleMixin,\n  mountComponent\n}","import { initState } from \"./state\";\nimport { compileToRenderFunction } from './compiler';\nimport { mountComponent } from './lifecycle';\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n\n    vm.$options = options;\n\n    initState(vm);\n\n    if (vm.$options.el) {\n      // 挂载函数   Vue.prototype.$mount\n      vm.$mount(vm.$options.el);\n    }\n  }\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this,\n          options = vm.$options;\n    \n    el = document.querySelector(el),\n    vm.$el = el;\n\n    if (!options.render) {\n      let template = options.template;\n\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n\n      const render = compileToRenderFunction(template);\n      options.render = render;\n    }\n\n    mountComponent(vm);\n  } \n}\n\nexport {\n  initMixin\n}","function createElement (tag, attrs = {}, ...children) {\n  return vnode(tag, attrs, children);\n}\n\nfunction createTextVnode (text) {\n  return vnode(undefined, undefined, undefined, text);\n}\n\nfunction vnode (tag, props, children, text) {\n  return {\n    tag,\n    props,\n    children,\n    text\n  }\n}\n\nexport {\n  createElement,\n  createTextVnode\n}","import { createElement, createTextVnode } from './vnode';\n\nfunction renderMixin (Vue) {\n  Vue.prototype._c = function () {\n    return createElement(...arguments);\n  }\n\n  Vue.prototype._s = function (value) {\n    if (value === null) return;\n    return typeof value === 'object' ? JSON.stringify(value) : value;\n  }\n\n  Vue.prototype._v = function (text) {\n    return createTextVnode(text);\n  }\n\n  Vue.prototype._render = function () {\n    const vm = this,\n          render = vm.$options.render,\n          vnode = render.call(vm);\n    \n    return vnode;\n  }\n}\n\nexport {\n  renderMixin\n}","import { initMixin } from './init';\nimport { lifecycleMixin } from './lifecycle';\nimport { renderMixin } from './vdom';\n\nfunction Vue (options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\nexport default Vue;\n\n"],"names":["originArrMethods","Array","prototype","newArrMethods","Object","create","ARR_METHODS","map","method","args","result","methods","apply","ob","__ob__","newArr","slice","observeArr","proxy","vm","target","key","defineProperty","get","set","newValue","isObject","value","isArray","setConstantProperty","data","enumerable","configurable","Observer","constructor","__proto__","walk","keys","defineReactive","item","observe","console","log","initState","options","$options","initData","_data","call","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHtmlToAst","html","text","root","currentParent","stack","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","length","end","substring","chars","attr","push","name","n","element","createASTElement","pop","parent","children","trim","type","tag","defaultTagRE","formatProps","attrStr","i","styleAttrs","split","styleAttr","JSON","stringify","generateChild","node","generate","test","index","lastIndex","textArr","exec","join","geChildren","el","c","code","compileToRenderFunction","ast","render","Function","patch","oldNode","vNode","createElement","parentElement","parentNode","insertBefore","nextSibling","removeChild","vnode","props","document","updateProps","child","appendChild","createTextNode","newProps","sKey","style","className","class","setAttribute","mountComponent","_update","_render","lifecycleMixin","Vue","$el","initMixin","_init","$mount","querySelector","template","outerHTML","createTextVnode","undefined","renderMixin","_c","arguments","_s","_v"],"mappings":"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"}